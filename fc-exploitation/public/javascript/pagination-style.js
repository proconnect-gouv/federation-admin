import $ from 'jquery';
import { pagination } from './pagination-script';

export function paginationStyle(element) {
  const totalPagesFromView = element.dataset.pages;
  const limitParam = element.dataset.limit;
  let activePage = parseInt(element.dataset.currentpge, 10);
  const previous = element.dataset.previous;
  const next = element.dataset.next;
  let paginator = pagination(activePage, totalPagesFromView);

  $("#pagination-container").append(`
      <li class="page-item `+ (previous === ''? 'disabled' : '') +`">
        <a class="page-link" href="${previous}">Pr√©cedente</a>
      </li>
  `)
  for (let i = 1, length = paginator.length; i <= length; i++) {
    if (paginator[i - 1] === '...') {
      $("#pagination-container").append('<li class="page-item"><a class="page-link" href="#">...</a></li>');
    } else {
      $("#pagination-container").append(`
        <li class="page-item ` +
        (activePage === paginator[i - 1] ? 'active' : '') + `">
        <a class="page-link" href="?page=${paginator[i - 1]}&limit=${limitParam}">${paginator[i - 1]}</a>
       </li>`);
    }
  }
  $("#pagination-container").append(`
      <li class="page-item">
        <a class="page-link" href="${next}">Suivante</a>
      </li>
  `)
}
